<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Get Panaroma ID</title>
</head>
<body>
  <input id="input"></input>
  <button id="btn">Get ID</button>
  <br/>
  <br/>
  ID: <h2 id="output"><h2>
  <button id="btn2" style="visibility: hidden" onClick="copy('output')">Copy !</button>
  <script>
    
    document.getElementById('btn').addEventListener('click', () => getId())
    
    const getId = () => {
      const url = document.getElementById("input").value;

      const id_start = "!1s";
      const id_end = "!2e";
      const result = url.slice(url.indexOf(id_start)+3, url.indexOf(id_end))
    
      document.getElementById("output").innerHTML = `${result}`
      
      document.getElementById("btn2").style = "visibility: visible"
    }
    const copy = (id) => {
      var r = document.createRange();
      r.selectNode(document.getElementById(id));
      window.getSelection().removeAllRanges();
      window.getSelection().addRange(r);
      document.execCommand('copy');
      window.getSelection().removeAllRanges();
      
      alert("coppied !")
    }
  </script>
</body>
</html>
